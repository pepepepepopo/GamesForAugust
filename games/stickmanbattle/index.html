<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Stickman Battle</title>
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
    {
      "imports": {
        "matter-js": "https://esm.sh/matter-js@0.19.0",
        "@websim/websim-socket": "https://esm.websim.com/@websim/websim-socket"
      }
    }
    </script>
</head>
<body>
    <div id="intro-screen">
        <img src="/CoolGuyProductionsLogo.png" alt="Cool Guy Productions Logo">
        <h1>made by CoolGuy Productions</h1>
        <p>Click to Start</p>
    </div>

    <div id="game-container" class="hidden">
        <div id="ui-container">
            <div id="ui-left">
                <div id="coin-display">
                    <img src="/Coin1.png" alt="Coin">
                    <span id="coin-count">100</span>
                </div>
            </div>
            <div id="ui-center">
                 <button id="start-round-btn">Start Round</button>
                 <button id="speed-up-btn" style="margin-left: 10px; padding: 1vh 2vw; font-size: calc(0.8em + 1vmin); background-color: #FF6B6B; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Speed Up (2x)</button>
            </div>
            <div id="ui-right">
                <div class="top-row">
                    <div id="rounds-survived-display">
                        Rounds Survived: <span id="rounds-survived-count">0</span>
                    </div>
                    <button id="settings-btn">Settings</button>
                </div>
                <div class="bottom-row">
                    <button id="forfeit-btn">Forfeit</button>
                </div>
            </div>
        </div>

        <div id="game-world">
            <div id="round-display"></div>
            <div id="leaderboard-warning" style="position: absolute; top: 50px; left: 50%; transform: translateX(-50%); background-color: rgba(255, 165, 0, 0.9); color: black; padding: 10px; border-radius: 5px; font-size: 12px; text-align: center; z-index: 20; max-width: 400px;">
                ⚠️ Please don't rely on the leaderboard, and always screenshot your rounds. The leaderboard is a little glitchy and unreliable. ⚠️
            </div>
            <div id="skip-hint" style="position: absolute; top: 10px; right: 10px; color: rgba(255,255,255,0.7); font-size: 12px; z-index: 15;">Right-click Start Round to skip</div>
            
            <!-- Add missions panel -->
            <div id="missions-panel">
                <div id="missions-header">
                    <h3>Missions</h3>
                    <button id="toggle-missions-btn">−</button>
                </div>
                <div id="missions-container">
                    <!-- Mission items will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Stickmen and coins will be added here by JavaScript -->
        </div>

        <div id="bottom-bar">
            <button id="open-shop-btn">Buy Stickman</button>
        </div>
    </div>

    <div id="shop-modal" class="hidden">
        <div id="shop-container">
            <div id="shop-header">
                <h2>Stickman Shop</h2>
                <input type="text" id="shop-search" placeholder="Search...">
                <button id="close-shop-btn">&times;</button>
            </div>
            <div id="shop-items-container">
                <!-- Shop items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <div id="settings-modal" class="hidden">
        <div id="settings-container">
            <div id="settings-header">
                <h2>Settings</h2>
                <button id="close-settings-btn">&times;</button>
            </div>
            <div id="settings-content">
                <div class="setting-item">
                    <label for="music-volume-slider">Music Volume</label>
                    <input type="range" id="music-volume-slider" min="0" max="1" step="0.01" value="0.3">
                    <span id="music-volume-value">30%</span>
                </div>
                <div class="setting-item">
                    <label for="sfx-volume-slider">Sound Effects Volume</label>
                    <input type="range" id="sfx-volume-slider" min="0" max="1" step="0.01" value="1.0">
                    <span id="sfx-volume-value">100%</span>
                </div>
            </div>
        </div>
    </div>

    <div id="game-over-screen" class="hidden">
        <h1>Game Over</h1>
        <p>You survived <span id="final-rounds-survived">0</span> rounds.</p>
        <button id="restart-btn">Restart Game</button>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>